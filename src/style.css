/* =========================
   공통: 컬러/리셋/타이포
========================= */
:root{
  --bg:#0b0c10;
  --text:#E6E8EC;
  --muted:#9aa0a6;
  --card:#121319;
  --border:#23252e;
  --primary:#5b7cfa;
  --primary-weak:rgba(91,124,250,.14);
  --ring:#6b8cff;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
html{
  /* iOS 확대 방지에 도움되는 설정 */
  -webkit-text-size-adjust:100%;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:ui-sans-serif,system-ui,"Apple SD Gothic Neo","Noto Sans KR",Pretendard,
               -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
  line-height:1.5;
  overflow-x:hidden;            /* 모바일에서 가로 스크롤 방지 */
}

/* 안전 영역(iPhone 노치) */
body{ padding-left:env(safe-area-inset-left); padding-right:env(safe-area-inset-right); }

/* 링크/버튼 탭 영역 확대(모바일 손가락 터치배려) */
button, a { -webkit-tap-highlight-color: transparent; }

/* 미디어는 컨테이너 너비 넘지 않게 */
img, video{ max-width:100%; height:auto; display:block; }

/* 접두 문구/헤더/컨테이너 */
.container{
  max-width:1120px;
  margin:0 auto;
  padding:40px 16px;
}
@media (max-width:560px){
  .container{ padding:24px 14px; }
}

.header{
  display:flex; align-items:flex-start; justify-content:space-between; gap:16px; margin-bottom:28px;
}
.title{ font-weight:800; letter-spacing:-.02em; font-size:clamp(20px, 3.2vw, 28px); }
.desc{ margin-top:6px; color:var(--muted); font-size:clamp(12px, 2.8vw, 13px); }
.btn-reset{
  display:inline-flex; align-items:center; gap:8px; height:40px; padding:0 14px;
  border-radius:14px; border:1px solid var(--border); background:transparent; color:var(--text); cursor:pointer;
}
.btn-reset:hover{ background:#0f1016; }

/* =========================
   섹션/그리드
========================= */
.section{ margin-bottom:24px; }
.section-title{ margin:0 0 10px; font-size:16px; font-weight:700; }

.grid{ display:grid; gap:12px; }
.grid.cols-4{ grid-template-columns:repeat(4, minmax(0,1fr)); }
.grid.cols-3{ grid-template-columns:repeat(3, minmax(0,1fr)); }
.grid.cols-2{ grid-template-columns:repeat(2, minmax(0,1fr)); }

/* 태블릿 이하에서 2→1열, 3→1~2열로 부드럽게 축소 */
@media (max-width:1024px){
  .grid.cols-4{ grid-template-columns:repeat(2, minmax(0,1fr)); }
  .grid.cols-3{ grid-template-columns:repeat(2, minmax(0,1fr)); }
}
@media (max-width:560px){
  .grid.cols-4, .grid.cols-3, .grid.cols-2{ grid-template-columns:1fr; }
}

/* 2x2 카드 레이아웃이 필요할 때 */
.grid.cards-2x2{ grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; align-items:start; }
@media (max-width:880px){
  .grid.cards-2x2{ grid-template-columns:1fr; }
}

/* =========================
   탭/칩 (기존 오류 수정!)
========================= */
.tab{
  padding:16px 12px; border-radius:16px; border:1px solid var(--border);
  background:var(--card); text-align:center; cursor:pointer; color:#fff; width:100%;
}
.tab:focus{ outline:2px solid var(--ring); }
.tab.is-active{
  outline:2px solid var(--ring);
  background:var(--primary-weak);
  border-color:var(--primary);
  color:#cbd6ff;
}

/* 칩(세부 카테고리) */
.chips{ display:flex; flex-wrap:wrap; gap:8px; }
.chip{
  padding:8px 12px; border-radius:999px; border:1px solid var(--border);
  background:var(--card); font-size:13px; cursor:pointer; color:#fff;
}
.chip.is-active{
  background:var(--primary-weak);
  border-color:var(--primary);
  color:#cbd6ff;
}

/* =========================
   카드/폼/버튼
========================= */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
}

/* 폼 2열 → 모바일 1열 */
.form{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:14px; }
@media (max-width:800px){ .form{ grid-template-columns:1fr; } }

.field{ display:grid; gap:6px; }
.label{ font-size:12px; color:var(--muted); }
.select, .input{
  height:44px; border-radius:14px; border:1px solid var(--border);
  background:#0f1117; color:var(--text); padding:0 12px; width:100%;
}
.checkbox{ display:flex; align-items:center; gap:8px; }
.btn-primary{
  height:44px; border-radius:14px; border:1px solid transparent;
  background:var(--primary); color:#fff; font-weight:700; cursor:pointer; width:100%;
}
.btn-primary:disabled{ opacity:.5; cursor:not-allowed; }

/* =========================
   KPI/결과
========================= */
.kpi{ display:flex; align-items:baseline; gap:8px; margin-bottom:12px; }
.kpi .value{ font-size:28px; font-weight:800; }
.kpi .unit{ font-size:13px; color:var(--muted); }

.row{
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 0; border-bottom:1px dashed #1e2029;
}
.row:last-child{ border-bottom:none; }

/* 결과 카드: 넓은 화면에선 축소, 모바일은 100% */
.result-card{
  width:100%; max-width:420px; margin:10px auto 0; align-self:start; justify-self:center;
}
@media (min-width:1025px){
  /* 필요 시 그리드 옆에 붙이는 사이드 느낌 */
  .result-card{ max-width:calc((100% - 30px)/4); }
}
@media (max-width:1024px){ .result-card{ max-width:calc((100% - 10px)/2); } }
@media (max-width:560px){ .result-card{ max-width:100%; } }

/* 간격 헬퍼 */
.sp-10{ height:10px; } .sp-14{ height:14px; }

/* =========================
   모달(반응형)
========================= */
.no-scroll{ overflow:hidden; }
.modal-backdrop{
  position:fixed; inset:0;
  background:rgba(0,0,0,.55);
  display:none; align-items:center; justify-content:center; z-index:50;
}
.modal-backdrop.is-open{ display:flex; }
.modal{
  width:min(720px,92vw);
  max-height:92vh; overflow:auto;
  background:var(--card); border:1px solid var(--border); border-radius:18px;
  box-shadow:0 10px 40px rgba(0,0,0,.45);
}
.modal-header{
  position:sticky; top:0; z-index:1;
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px; border-bottom:1px solid var(--border); background:var(--card);
}
.modal-title{ font-weight:700; font-size:16px; }
.modal-close{ background:transparent; border:none; color:var(--muted); font-size:22px; line-height:1; cursor:pointer; }
.modal-body{ padding:16px; }
.modal-footer{
  position:sticky; bottom:0; z-index:1;
  display:flex; gap:8px; justify-content:flex-end;
  padding:14px 16px; border-top:1px solid var(--border); background:var(--card);
}
.btn{
  height:40px; border-radius:12px; padding:0 14px; border:1px solid var(--border);
  background:#0f1117; color:var(--text); cursor:pointer;
}
.btn:hover{ filter:brightness(1.05); }
.btn.primary{ background:var(--primary); color:#fff; border-color:transparent; }

/* =========================
   접근성/애니메이션 제어
========================= */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.01ms !important; animation-iteration-count:1 !important; transition-duration:.01ms !important; scroll-behavior:auto !important; }
}

/* ── 군 분류 탭: 항상 4칸 한 줄 유지 ───────────────────────── */
/* React 구조(aria-label)와 정적 HTML(#branchTabs) 둘 다 커버 */
[role="tablist"][aria-label="군 분류"],
#branchTabs{
  display: grid !important;
  grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  gap: 10px;
}

/* 브레이크포인트에서도 4칸 유지 (기존 .grid.* 미디어쿼리 덮어쓰기) */
@media (max-width:1024px){
  [role="tablist"][aria-label="군 분류"],
  #branchTabs{
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  }
}
@media (max-width:560px){
  [role="tablist"][aria-label="군 분류"],
  #branchTabs{
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  }
}

/* 탭 텍스트 줄바꿈 방지 + 작은 화면에서 글자 살짝 줄이기 */
[role="tablist"][aria-label="군 분류"] .tab,
#branchTabs .tab{
  white-space: nowrap;
  padding: 14px 8px;     /* 좁은 화면에서 폭 확보 */
  font-size: clamp(12px, 3.2vw, 16px);
}
